var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,e,n){d instanceof String&&(d=String(d));for(var k=d.length,m=0;m<k;m++){var q=d[m];if(e.call(n,q,m,d))return{i:m,v:q}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,e,n){d!=Array.prototype&&d!=Object.prototype&&(d[e]=n.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,e,n,k){if(e){n=$jscomp.global;d=d.split(".");for(k=0;k<d.length-1;k++){var m=d[k];m in n||(n[m]={});n=n[m]}d=d[d.length-1];k=n[d];e=e(k);e!=k&&null!=e&&$jscomp.defineProperty(n,d,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,n){return $jscomp.findInternal(this,d,n).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(d){var e=0;return function(){return e<d.length?{done:!1,value:d[e++]}:{done:!0}}};
$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var d=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+d++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};
$jscomp.iteratorFromArray=function(d,e){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var n=0,k={next:function(){if(n<d.length){var m=n++;return{value:e(m,d[m]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
$jscomp.owns=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)};$jscomp.polyfill("Object.values",function(d){return d?d:function(d){var e=[],k;for(k in d)$jscomp.owns(d,k)&&e.push(d[k]);return e}},"es8","es3");
jQuery.fn.flexdatalist=function(d,e){var n=function(d,g){d.each(function(){var c=$(this),d=c.data(),e=d.flexdatalist;if(d=d.aliascontainer)c.removeClass("flexdatalist-set").attr({style:null,tabindex:null}).val(e&&e.originalValue&&!g?e.originalValue:"").removeData("flexdatalist").removeData("aliascontainer").off(),d.remove()})};if("string"===typeof d&&"reset"!==d){if("undefined"!==typeof this[0].fvalue){var k=this[0];if("destroy"===d)n(this,e);else if("value"===d){if("undefined"===typeof e)return k.fvalue.get();
k.fvalue.set(e)}else if("add"===d){if("undefined"===typeof e)return k.debug("Missing value to add!");k.fvalue.add(e)}else if("toggle"===d){if("undefined"===typeof e)return k.debug("Missing value to toggle!");k.fvalue.toggle(e)}else if("remove"===d){if("undefined"===typeof e)return k.debug("Missing value to remove!");k.fvalue.remove(e)}else if("disabled"===d){if("undefined"===typeof e)return k.fdisabled();k.fdisabled(e)}else if("string"===typeof d){if("undefined"===typeof e)return k.options.get(d);
k.options.set(d,e)}return this}d={_option:e}}0<this.length&&"undefined"!==typeof this[0].fvalue&&n(this);var m=$.extend({url:null,data:[],params:{},relatives:null,chainedRelatives:!1,cache:!0,cacheLifetime:60,minLength:2,groupBy:!1,selectionRequired:!1,focusFirstResult:!1,textProperty:null,valueProperty:null,visibleProperties:[],iconProperty:"thumb",searchIn:["label"],searchContain:!1,searchEqual:!1,searchByWord:!1,searchDisabled:!1,searchDelay:300,normalizeString:null,multiple:null,disabled:null,
maxShownResults:100,removeOnBackspace:!0,noResultsText:'No results found for "{keyword}"',toggleSelected:!1,allowDuplicateValues:!1,redoSearchOnFocus:!0,requestType:"get",requestContentType:"x-www-form-urlencoded",resultsProperty:"results",keywordParamName:"keyword",limitOfValues:0,valuesSeparator:",",debug:!0},d);return this.each(function(d){var g=$(this),c=this,e=null,k=[],n="flex"+d,l=null,p=null;this.init=function(){var a=this.options.init();this.set.up();l.on("focusin",function(a){c.action.redoSearchFocus(a);
c.action.showAllResults(a);p&&p.addClass("focus")}).on("input keydown",function(a){9===c.keyNum(a)&&c.results.remove();c.action.keypressValue(a,188);c.action.backSpaceKeyRemove(a)}).on("input keyup",function(a){c.action.keypressValue(a,13);c.action.keypressSearch(a);c.action.copyValue(a);c.action.backSpaceKeyRemove(a);c.action.showAllResults(a);c.action.clearValue(a);c.action.removeResults(a);c.action.inputWidth(a)}).on("focusout",function(a){p&&p.removeClass("focus");c.action.clearText(a);c.action.clearValue(a)});
window.onresize=function(a){c.position()};this.cache.gc();a.selectionRequired&&c.fvalue.clear(!0,!0);this.fvalue._load(a.originalValue,function(b,h){c.fdisabled(a.disabled);g.trigger("init:flexdatalist",[a])},!0)};this.action={keypressValue:function(a,b){var h=c.keyNum(a),f=l[0].value,d=c.options.get();0<f.length&&h===b&&!d.selectionRequired&&d.multiple&&(f=l[0].value,a.preventDefault(),c.fvalue.extract(f),c.results.remove())},keypressSearch:function(a){a=c.keyNum(a);var b=l.val(),h=b.length,f=c.options.get();
clearTimeout(e);if(!a||13!==a&&(37>a||40<a))e=setTimeout(function(){(0===f.minLength&&0<h||0<f.minLength&&h>=f.minLength)&&c.data.load(function(a){c.search.get(b,a,function(a){c.results.show(a)})})},f.searchDelay)},redoSearchFocus:function(a){var b=c.fvalue.get(),h=c.options.get(),f=l.val();h.redoSearchOnFocus&&(0<f.length&&h.multiple||0<f.length&&0===b.length)&&this.keypressSearch(a)},copyValue:function(a){if(13!==c.keyNum(a)){a=l.val();var b=c.fvalue.get(!0),h=c.options.get();h.multiple||h.selectionRequired||
a.length===b.length||c.fvalue.extract(a)}},backSpaceKeyRemove:function(a){var b=c.options.get();if(b.removeOnBackspace&&b.multiple){b=l.val();var h=l.data("_remove");8===c.keyNum(a)&&(0===b.length?h?(c.fvalue.remove(h),l.data("_remove",null)):(console.log("remove!"),l.data("_remove",l.parents("li:eq(0)").prev())):l.data("_remove",null))}},showAllResults:function(a){a=l.val();a=$.trim(a);""===a&&0===c.options.get("minLength")&&c.data.load(function(a){c.results.show(a)})},inputWidth:function(a){if(c.options.get().multiple){var b=
l.val(),h=parseInt(l.css("fontSize").replace("px",""));a=g.innerWidth();b=(b.length+1)*h;40<=b&&b<=a&&(l[0].style.width=b+"px")}},clearText:function(a){a=c.fvalue.get();var b=c.options.get();!b.multiple&&b.selectionRequired&&0===a.length&&(l[0].value="")},clearValue:function(a){c.fvalue.get();a=l.val();var b=c.options.get();!b.multiple&&b.selectionRequired&&a.length<=b.minLength&&c.fvalue.clear()},removeResults:function(a){c.fvalue.get();a=l.val();var b=c.options.get();0<b.minLength&&a.length<b.minLength&&
c.results.remove()}};this.set={up:function(){l=this.alias();c.options.get("multiple")?p=this.multipleInput(l):l.insertAfter(g);g.attr("autofocus")&&l.focus();g.data("aliascontainer",p?p:l).addClass("flexdatalist flexdatalist-set").css({position:"absolute",top:-14E3,left:-14E3}).attr("tabindex",-1);var a=g.attr("id"),b=l.attr("id");$('label[for="'+a+'"]').attr("for",b);this.chained()},alias:function(){var a=g.attr("id")?g.attr("id")+"-flexdatalist":n;return $('<input type="text">').attr({"class":g.attr("class"),
name:g.attr("name")?"flexdatalist-"+g.attr("name"):null,id:a,placeholder:g.attr("placeholder")}).addClass("flexdatalist-alias "+a).removeClass("flexdatalist").attr("autocomplete","off")},multipleInput:function(a){p=$('<ul tabindex="1">').addClass("flexdatalist-multiple "+n).css({"border-color":g.css("border-left-color"),"border-width":g.css("border-left-width"),"border-style":g.css("border-left-style"),"border-radius":g.css("border-top-left-radius"),"background-color":g.css("background-color")}).insertAfter(g).click(function(){$(this).find("input").focus()});
$('<li class="input-container">').addClass("flexdatalist-multiple-value").append(a).appendTo(p);return p},chained:function(){var a=c.options.get();if(a.relatives&&a.chainedRelatives){var b=function(b){a.relatives.each(function(){var a=c.isEmpty($(this).val()),b=c.isEmpty(c.value);!a&&b||c.fvalue.clear();c.fdisabled(a)})};a.relatives.on("change",function(){b()});b(!0)}}};this.fvalue={get:function(a){var b=c.value;return!c.options.get().multiple&&!this.isJSON()||a?b:this.toObj(b)},set:function(a,b){c.fdisabled()||
(b||this.clear(!0),this._load(a));return g},add:function(a){c.options.get("multiple")&&this.set(a,!0);return this},toggle:function(a){c.fdisabled()||this.multiple.toggle(a);return this},remove:function(a){if(!c.fdisabled()){a=this.toObj(a);g.trigger("before:flexdatalist.remove",[a]);var b=[];if($.isArray(a))$.each(a,function(a,h){(a=c.fvalue.multiple.remove(h))&&b.push(a)});else{var h=this.multiple.remove(a);h&&b.push(h)}g.trigger("after:flexdatalist.remove",[a,b]).trigger("change:flexdatalist",[b,
c.options.get()]).trigger("change")}return this},_load:function(a,b,h){var f=c.options.get().valueProperty,d=this.toStr(a),e=this.get(!0);b=b?b:$.noop;0==d.length&&0==e.length?b(a):(a=this.toObj(a),c.isEmpty(a)||c.isEmpty(f)||"*"===f?(b(a),c.fvalue.extract(a,h)):(c.isObject(f)||(f=f.split(",")),c.data.load(function(h){c.isObject(a)?$.isArray(a)||(a=[a]):a=a.split(",");for(var d=[],e=0;e<a.length;e++)for(var g=a[e],t=0;t<h.length;t++)for(var r=h[t],k=0;k<f.length;k++){var l=f[k];g=c.isDefined(g,l)?
g[l]:g;c.isDefined(r,l)&&g===r[l]&&d.push(r)}0<d.length&&c.fvalue.extract(d,!0);b(a)},a)))},extract:function(a,b){var h=c.options.get(),f=[];b||g.trigger("before:flexdatalist.value",[a,h]);$.isArray(a)?$.each(a,function(a,b){f.push(c.fvalue._extract(b))}):f=c.fvalue._extract(a);b||g.trigger("after:flexdatalist.value",[f,h]).trigger("change:flexdatalist",[f,h]).trigger("change")},_extract:function(a){var b=this.text(a);a=this.value(a);if(c.options.get().multiple){if(!c.isEmpty(a)){if(c.isDup(a))return;
k.push(a);this.multiple.add(a,b)}}else this.single(a,b);return{value:a,text:b}},single:function(a,b){b&&b!==l.val()&&(l[0].value=b);c.value=a},multiple:{add:function(a,b){var h=this;b=this.li(a,b);c.options.get();b.click(function(){h.toggle($(this))}).find(".fdl-remove").click(function(){c.fvalue.remove($(this).parent())});this.push(a);l[0].value="";this.checkLimit()},push:function(a,b){b=c.fvalue.get();a=c.fvalue.toObj(a);b.push(a);a=c.fvalue.toStr(b);c.value=a},toggle:function(a){var b=c.options.get();
if(b.toggleSelected&&(a=this.findLi(a))){var h=a.index(),f=a.data(),d=a.hasClass("disabled")?"enable":"disable",e=c.fvalue.get();b=[{value:f.value,text:f.text,action:d},b];g.trigger("before:flexdatalist.toggle",b);"enable"===d?(d=a.data("value"),e.splice(h,0,d),a.removeClass("disabled")):(e.splice(h,1),a.addClass("disabled"));e=c.fvalue.toStr(e);c.value=e;g.trigger("after:flexdatalist.toggle",b).trigger("change:flexdatalist",b).trigger("change")}},remove:function(a){if(a=this.findLi(a)){var b=c.fvalue.get(),
h=a.index(),f=a.data();c.options.get();f={value:f.value,text:f.text};b.splice(h,1);b=c.fvalue.toStr(b);c.value=b;a.remove();c.fvalue.multiple.checkLimit();k.splice(h,1);return f}},removeAll:function(){var a=c.fvalue.get(),b=c.options.get();g.trigger("before:flexdatalist.remove.all",[a,b]);p.find("li:not(.input-container)").remove();c.value="";k=[];g.trigger("after:flexdatalist.remove.all",[a,b])},li:function(a,b){var h=p.find("li.input-container");return $("<li>").addClass("value"+(c.options.get("toggleSelected")?
" toggle":"")).append('<span class="text">'+b+"</span>").append('<span class="fdl-remove">&times;</span>').data({text:b,value:c.fvalue.toObj(a)}).insertBefore(h)},checkLimit:function(){var a=c.options.get("limitOfValues");if(0<a){var b=p.find("li.input-container");a==k.length?b.hide():b.show()}},findLi:function(a){if(a instanceof jQuery)0===a.length&&(a=null);else{var b=a;a=null;p.find("li:not(.input-container)").each(function(){var c=$(this);if(c.data("value")===b)return a=c,!1})}return a},isEmpty:function(){return 0<
this.get().length}},value:function(a){var b=a,h=c.options.get(),f=h.valueProperty;if(c.isObject(a))if(this.isJSON()||this.isMixed())if(delete a.name_highlight,$.isArray(f)){b={};for(h=0;h<f.length;h++)c.isDefined(a,f[h])&&(b[f[h]]=a[f[h]]);b=this.toStr(b)}else b=this.toStr(a);else b=c.isDefined(a,f)?a[f]:c.isDefined(a,h.searchIn[0])?a[h.searchIn[0]]:null;return b},text:function(a){var b=a,h=c.options.get();c.isObject(a)&&(b=a[h.searchIn[0]],b=c.isDefined(a,h.textProperty)?a[h.textProperty]:this.placeholders.replace(a,
h.textProperty,b));return $("<div>").html(b).text()},placeholders:{replace:function(a,b,h){if(c.isObject(a)&&"string"===typeof b){var f=this.parse(b);if(!c.isEmpty(a)&&f)return $.each(f,function(h,f){c.isDefined(a,f)&&(b=b.replace(h,a[f]))}),b}return h},parse:function(a){if(a=a.match(/\{.+?\}/g)){var b={};a.map(function(a){b[a]=a.slice(1,-1)});return b}return!1}},clear:function(a,b){var h=c.value,f=c.options.get();f.multiple&&this.multiple.removeAll();c.value="";""===h||b||g.trigger("change:flexdatalist",
[{value:"",text:""},f]).trigger("change");a&&(l[0].value="");k=[];return this},toObj:function(a){if("object"!==typeof a){var b=c.options.get();c.isEmpty(a)||!c.isDefined(a)?a=b.multiple?[]:this.isJSON()?{}:"":this.isCSV()?(a=a.toString().split(b.valuesSeparator),a=$.map(a,function(a){return $.trim(a)})):(this.isMixed()||this.isJSON())&&this.isJSON(a)?a=JSON.parse(a):"number"===typeof a&&(a=a.toString())}return a},toStr:function(a){if("string"!==typeof a)if(c.isEmpty(a)||!c.isDefined(a))a="";else if("number"===
typeof a)a=a.toString();else if(this.isCSV())a=a.join(c.options.get("valuesSeparator"));else if(this.isJSON()||this.isMixed())a=JSON.stringify(a);return $.trim(a)},isJSON:function(a){if("undefined"!==typeof a){if(c.isObject(a))a=JSON.stringify(a);else if("string"!==typeof a)return!1;return 0===a.indexOf("{")||0===a.indexOf("[{")}a=c.options.get().valueProperty;return c.isObject(a)||"*"===a},isMixed:function(){var a=c.options.get();return!a.selectionRequired&&"*"===a.valueProperty},isCSV:function(){return!this.isJSON()&&
c.options.get("multiple")}};this.data={load:function(a,b){var c=this,f=[];g.trigger("before:flexdatalist.data");this.url(function(b){f=f.concat(b);c.static(function(b){f=f.concat(b);c.datalist(function(b){f=f.concat(b);g.trigger("after:flexdatalist.data",[f]);a(f)})})},b)},static:function(a){var b=c.options.get();if("string"===typeof b.data){var h=b.data,f=c.cache.read(h,!0);f?a(f):this.remote({url:h,success:function(f){b.data=f;a(f);c.cache.write(h,f,b.cacheLifetime,!0)}})}else"object"!==typeof b.data&&
(b.data=[]),a(b.data)},datalist:function(a){var b=g.attr("list"),h=[];c.isEmpty(b)||$("#"+b).find("option").each(function(){var a=$(this),b=a.val();a=a.text();h.push({label:0<a.length?a:b,value:b})});a(h)},url:function(a,b){var h=l.val(),f=c.options.get(),d=f.keywordParamName,e=c.fvalue.get(),g=this.relativesData();if(c.isEmpty(f.url))return a([]);var k={};"post"===f.requestType&&($.each(f,function(a,b){0!=a.indexOf("_")&&"data"!=a&&(k[a]=b)}),delete k.relatives);var n=c.cache.keyGen({relative:g,
load:b,keyword:h,contain:f.searchContain},f.url),m=c.cache.read(n,!0);m?a(m):(b=$.extend(g,f.params,{load:b,contain:f.searchContain,selected:e,original:f.originalValue,options:k}),b[d]=h,this.remote({url:f.url,data:b,success:function(b){l.val().length>=h.length&&a(b);c.cache.write(n,b,f.cacheLifetime,!0)}}))},remote:function(a){var b=this,h=c.options.get();g.hasClass("flexdatalist-loading")||(g.addClass("flexdatalist-loading"),"json"===h.requestContentType&&(a.data=JSON.stringify(a.data)),$.ajax($.extend({type:h.requestType,
dataType:"json",contentType:"application/"+h.requestContentType+"; charset=UTF-8",complete:function(){g.removeClass("flexdatalist-loading")}},a,{success:function(c){c=b.extractRemoteData(c);a.success(c)}})))},extractRemoteData:function(a){var b=c.options.get();a=c.isDefined(a,b.resultsProperty)?a[b.resultsProperty]:a;"string"===typeof a&&0===a.indexOf("[{")&&(a=JSON.parse(a));a&&a.options&&c.options.set($.extend({},b,a.options));return c.isObject(a)?a:[]},relativesData:function(){var a=c.options.get("relatives"),
b={};a&&(b.relatives={},a.each(function(){var a=$(this),c=a.attr("name").split("][").join("-").split("]").join("-").split("[").join("-").replace(/^\|+|\-+$/g,"");b.relatives[c]=a.val()}));return b}};this.search={get:function(a,b,h){if(c.options.get().searchDisabled)d=b;else{var d=c.cache.read(a);if(!d){g.trigger("before:flexdatalist.search",[a,b]);if(!c.isEmpty(a)){d=[];for(var e=this.split(a),k=0;k<b.length;k++){var l=b[k];c.isDup(l)||(l=this.matches(l,e))&&d.push(l)}}c.cache.write(a,d,2);g.trigger("after:flexdatalist.search",
[a,b,d])}}h(d)},matches:function(a,b){var h=$.extend({},a),d=[],e=c.options.get(),g=e.searchIn;if(0<b.length)for(var k=0;k<g.length;k++){var l=g[k];if(c.isDefined(a,l)&&a[l]){for(var n=a[l].toString(),m=n,p=this.split(n),q=0;q<b.length;q++){var u=b[q];this.find(u,p)&&(d.push(u),m=this.highlight(u,m))}m!==n&&(h[l+"_highlight"]=this.highlight(m))}}return 0===d.length||e.searchByWord&&d.length<b.length-1?!1:h},highlight:function(a,b){if(b)return b.replace(new RegExp(a,c.options.get("searchContain")?
"ig":"i"),"|:|$&|::|");a=a.split("|:|").join('<span class="highlight">');return a.split("|::|").join("</span>")},find:function(a,b){for(var h=c.options.get(),d=0;d<b.length;d++){var e=b[d];e=this.normalizeString(e);a=this.normalizeString(a);if(h.searchEqual)return e==a;if(h.searchContain?0<=e.indexOf(a):0===e.indexOf(a))return!0}return!1},split:function(a){"string"===typeof a&&(a=[$.trim(a)]);if(c.options.get("searchByWord"))for(var b=0;b<a.length;b++){var d=$.trim(a[b]);0<d.indexOf(" ")&&(d=d.split(" "),
$.merge(a,d))}return a},normalizeString:function(a){if("string"===typeof a){var b=c.options.get("normalizeString");"function"===typeof b&&(a=b(a));return a.toUpperCase()}return a}};this.results={show:function(a){var b=this,d=c.options.get();this.remove(!0);if(a)if(0===a.length)this.empty(d.noResultsText);else{var f=this.container();d.groupBy?(a=this.group(a),Object.keys(a).forEach(function(h,e){e=a[h];h=c.results.highlight(e[0],d.groupBy,h);$("<li>").addClass("group").append($("<span>").addClass("group-name").html(h)).append($("<span>").addClass("group-item-count").text(" "+
e.length)).appendTo(f);b.items(e,f)})):this.items(a,f);var e=f.find("li:not(.group)");e.on("click",function(a){if(a=$(this).data("item"))c.fvalue.extract(a),b.remove(),g.trigger("select:flexdatalist",[a,d])}).hover(function(){e.removeClass("active");$(this).addClass("active").trigger("active:flexdatalist.results",[$(this).data("item")])},function(){$(this).removeClass("active")});d.focusFirstResult&&e.filter(":first").addClass("active")}},empty:function(a){if(!c.isEmpty(a)){var b=this.container(),
d=l.val();a=a.split("{keyword}").join(d);$("<li>").addClass("item no-results").append(a).appendTo(b)}},items:function(a,b){var d=c.options.get("maxShownResults");g.trigger("show:flexdatalist.results",[a]);for(var f=0;f<a.length&&!(0<d&&d===f);f++)this.item(a[f]).appendTo(b);g.trigger("shown:flexdatalist.results",[a])},item:function(a){for(var b=$("<li>").data("item",a).addClass("item"),d=c.options.get(),f=d.visibleProperties,e=0;e<f.length;e++){var g=f[e];if(-1<g.indexOf("{")){var k=c.fvalue.placeholders.replace(a,
g);g=c.fvalue.placeholders.parse(g);g=$("<span>").addClass("item item-"+Object.values(g).join("-")).html(k+" ").appendTo(b)}else{if(d.groupBy&&d.groupBy===g||!c.isDefined(a,g))continue;g===d.iconProperty?g=$("<img>").addClass("item item-"+g).attr("src",a[g]):(k=c.results.highlight(a,g),g=$("<span>").addClass("item item-"+g).html(k+" "))}g.appendTo(b)}return b},container:function(){var a=g;p&&(a=p);var b=$("ul.flexdatalist-results");0===b.length&&(b=$("<ul>").addClass("flexdatalist-results ").appendTo("body").attr("id",
l.attr("id")+"-results").css({"border-color":a.css("border-left-color"),"border-width":"1px","border-bottom-left-radius":a.css("border-bottom-left-radius"),"border-bottom-right-radius":a.css("border-bottom-right-radius")}).data({target:p?p:l,input:g}),c.position(l));return b},group:function(a){for(var b=[],d=c.options.get("groupBy"),f=0;f<a.length;f++){var e=a[f];if(c.isDefined(e,d)){var g=e[d];c.isDefined(b,g)||(b[g]=[]);b[g].push(e)}}return b},highlight:function(a,b,d){return c.isDefined(a,b+"_highlight")?
a[b+"_highlight"]:c.isDefined(a,b)?a[b]:d},remove:function(a){var b="ul.flexdatalist-results";a&&(b="ul.flexdatalist-results li");g.trigger("remove:flexdatalist.results");$(b).remove();g.trigger("removed:flexdatalist.results")}};this.cache={write:function(a,b,d,e){c.cache.isSupported()&&(a=this.keyGen(a,void 0,e),b={value:b,timestamp:c.unixtime(),lifetime:d?d:!1},localStorage.setItem(a,JSON.stringify(b)))},read:function(a,b){if(c.cache.isSupported()&&(a=this.keyGen(a,void 0,b),b=localStorage.getItem(a))){b=
JSON.parse(b);if(!this.expired(b))return b.value;localStorage.removeItem(a)}return null},delete:function(a,b){c.cache.isSupported()&&(a=this.keyGen(a,void 0,b),localStorage.removeItem(a))},clear:function(){if(c.cache.isSupported()){for(var a in localStorage)(-1<a.indexOf(n)||-1<a.indexOf("global"))&&localStorage.removeItem(a);localStorage.clear()}},gc:function(){if(c.cache.isSupported())for(var a in localStorage)if(-1<a.indexOf(n)||-1<a.indexOf("global")){var b=localStorage.getItem(a);b=JSON.parse(b);
this.expired(b)&&localStorage.removeItem(a)}},isSupported:function(){if(c.options.get("cache"))try{return"localStorage"in window&&null!==window.localStorage}catch(a){}return!1},expired:function(a){if(a.lifetime){var b=c.unixtime()-a.timestamp;return a.lifetime<=b}return!1},keyGen:function(a,b,c){"object"===typeof a&&(a=JSON.stringify(a));var d,e=void 0===b?2166136261:b;b=0;for(d=a.length;b<d;b++)e^=a.charCodeAt(b),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return(c?"global":n)+("0000000"+(e>>>0).toString(16)).substr(-8)}};
this.options={init:function(){var a=$.extend({},m,g.data(),{multiple:null===m.multiple?g.is("[multiple]"):m.multiple,disabled:null===m.disabled?g.is("[disabled]"):m.disabled,originalValue:c.value});this.set(a);return a},get:function(a){var b=g.data("flexdatalist");return a?c.isDefined(b,a)?b[a]:null:b?b:{}},set:function(a,b){var d=this.get();c.isDefined(d,a)&&c.isDefined(b)?d[a]=b:c.isObject(a)&&(d=this._normalize(a));g.data("flexdatalist",d);return g},_normalize:function(a){a.searchIn=c.csvToArray(a.searchIn);
a.relatives=a.relatives&&0<$(a.relatives).length?$(a.relatives):null;a.textProperty=null===a.textProperty?a.searchIn[0]:a.textProperty;a.visibleProperties=c.csvToArray(a.visibleProperties,a.searchIn);if("*"===a.valueProperty&&a.multiple&&!a.selectionRequired)throw Error("Selection must be required for multiple, JSON fields!");return a}};this.position=function(){var a=$("ul.flexdatalist-results"),b=a.data("target");0<a.length&&a.css({width:b.outerWidth()+"px",top:b.offset().top+b.outerHeight()+"px",
left:b.offset().left+"px"})};this.fdisabled=function(a){if(this.isDefined(a)){g.prop("disabled",a);l.prop("disabled",a);if(p){p.css("background-color",g.css("background-color"));var b=p.find("li .fdl-remove"),c=p.find("li.input-container");a?(p.addClass("disabled"),0<b.length&&c.hide(),b.hide()):(p.removeClass("disabled"),c.show(),b.show())}this.options.set("disabled",a)}return this.options.get("disabled")};this.isDup=function(a){return this.options.get("allowDuplicateValues")?!1:0<k.length&&-1<k.indexOf(this.fvalue.value(a))};
this.keyNum=function(a){return a.which||a.keyCode};this.isEmpty=function(a){if(c.isDefined(a)){if(null===a||!0!==a&&(0===this.length(a)||""===$.trim(a)))return!0}else return!0;return!1};this.isObject=function(a){return a&&"object"===typeof a};this.length=function(a){return this.isObject(a)?Object.keys(a).length:"number"===typeof a||"number"===typeof a.length?a.toString().length:0};this.isDefined=function(a,b){var c="undefined"!==typeof a;return c&&"undefined"!==typeof b?"undefined"!==typeof a[b]:
c};this.unixtime=function(a){var b=new Date;a&&(b=new Date(a));return Math.round(b.getTime()/1E3)};this.csvToArray=function(a,b){return 0===a.length?b:"string"===typeof a?a.split(c.options.get("valuesSeparator")):a};this.debug=function(a,b){var d=c.options.get();d.debug&&(b||(b={}),console.warn("Flexdatalist: "+a),console.log($.extend({inputName:g.attr("name"),options:d},b)),console.log("--- /flexdatalist ---"))};this.init()})};
jQuery(function(d){d(document).data("flexdatalist")||d(document).mousedown(function(e){e=d(".flexdatalist-results");e.data("target");e&&e.remove()}).keydown(function(e){var n=d(".flexdatalist-results"),k=n.find("li"),m=k.filter(".active"),q=m.index(),g=k.length,c=e.which||e.keyCode;if(0!==g)if(27===c)n.remove();else if(13===c)e.preventDefault(),m.click();else if(40===c||38===c)e.preventDefault(),40===c?m=q<g&&0<m.nextAll(".item").first().length?m.removeClass("active").nextAll(".item").first().addClass("active"):
k.removeClass("active").filter(".item:first").addClass("active"):38===c&&(m=0<q&&0<m.prevAll(".item").first().length?m.removeClass("active").prevAll(".item").first().addClass("active"):k.removeClass("active").filter(".item:last").addClass("active")),m.trigger("active:flexdatalist.results",[m.data("item")]),e=(0===m.prev().length?m:m.prev()).position().top,n.animate({scrollTop:e+n.scrollTop()},100)}).data("flexdatalist",!0);jQuery("input.flexdatalist:not(.flexdatalist-set):not(.autodiscover-disabled)").flexdatalist()});
(function(d){var e=d.fn.val;d.fn.val=function(d){var k=0<this.length&&"undefined"!==typeof this[0].fvalue;return"undefined"===typeof d?k?this[0].fvalue.get(!0):e.call(this):k?this[0].fvalue.set(d):e.call(this,d)}})(jQuery);
